\hypertarget{_descriptor_pool_vulkan_8cpp_source}{}\doxysection{Descriptor\+Pool\+Vulkan.\+cpp}
\label{_descriptor_pool_vulkan_8cpp_source}\index{OSKengine2/DescriptorPoolVulkan.cpp@{OSKengine2/DescriptorPoolVulkan.cpp}}
\mbox{\hyperlink{_descriptor_pool_vulkan_8cpp}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_descriptor_pool_vulkan_8h}{DescriptorPoolVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_descriptor_pool_vulkan_8h}{DescriptorPoolVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_dynamic_array_8hpp}{DynamicArray.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_layout_slot_8h}{MaterialLayoutSlot.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_descriptor_layout_vulkan_8h}{DescriptorLayoutVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_shader_binding_type_vulkan_8h}{ShaderBindingTypeVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_s_kengine_8h}{OSKengine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_renderer_8h}{IRenderer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_vulkan_8h}{GpuVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00012}00012 \textcolor{preprocessor}{\#include <vulkan/vulkan.h>}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00014}00014 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00015}00015 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s}{OSK::GRAPHICS}};}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00017}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_pool_vulkan_ac30681f5c514cb990ff3ca0cbcdd4bd3}{00017}} DescriptorPoolVulkan::DescriptorPoolVulkan(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_layout_vulkan}{DescriptorLayoutVulkan}}\& layout, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} maxSets) \{}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00018}00018     \mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{DynamicArray<VkDescriptorPoolSize>}} sizes;}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00020}00020     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& i : layout.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_layout_vulkan_a49f4c2f2536588cb688811ab2094180a}{GetMaterialSlotLayout}}()-\/>\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_layout_slot_aae656bee485d2b46a0996ebe97ae97d3}{bindings}}) \{}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00021}00021         VkDescriptorPoolSize size\{\};}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00022}00022         size.type = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a4c5b747cc726d69ca2876e77875618dc}{GetDescriptorTypeVk}}(i.second.type);}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00023}00023         size.descriptorCount = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a6bdcecd10ad67576f386bb8d42503bcd}{GetSwapchainImagesCount}}();}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00025}00025         sizes.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a2c1e7bd2efbadf8b163f67c26921ba53}{Insert}}(size);}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00026}00026     \}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00028}00028     VkDescriptorPoolCreateInfo poolInfo\{\};}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00029}00029     poolInfo.sType = VK\_STRUCTURE\_TYPE\_DESCRIPTOR\_POOL\_CREATE\_INFO;}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00030}00030     poolInfo.poolSizeCount = (uint32\_t)sizes.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}();}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00031}00031     poolInfo.pPoolSizes = sizes.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_ac8a6d70f938c482e1f7aa68c7d186bb8}{GetData}}();}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00032}00032     poolInfo.maxSets = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a6bdcecd10ad67576f386bb8d42503bcd}{GetSwapchainImagesCount}}() * maxSets;}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00034}00034     VkResult result = vkCreateDescriptorPool(\mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>GetGpu()-\/>As<GpuVulkan>()-\/>GetLogicalDevice(), }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00035}00035         \&poolInfo, \textcolor{keyword}{nullptr}, \&pool);}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00036}00036     \mbox{\hyperlink{_assert_8h_adfbccaec84df99b8277f9d877554170c}{OSK\_ASSERT}}(result == VK\_SUCCESS, \textcolor{stringliteral}{"{}No se ha podido crear el descriptor pool."{}});}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00037}00037 \}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00039}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_pool_vulkan_a50f232a3fcc87f99ce9355645e5ba88a}{00039}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_pool_vulkan_a50f232a3fcc87f99ce9355645e5ba88a}{DescriptorPoolVulkan::\string~DescriptorPoolVulkan}}() \{}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00040}00040     vkDestroyDescriptorPool(\mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>GetGpu()-\/>As<GpuVulkan>()-\/>GetLogicalDevice(),}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00041}00041         pool, \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00042}00042 \}}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00044}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_pool_vulkan_a66d484c59bb4bb2c1a779c1830e84a2b}{00044}} \mbox{\hyperlink{_descriptor_pool_vulkan_8h_a158eb958ed5d08e193e0b7edb532c34d}{VkDescriptorPool}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_descriptor_pool_vulkan_a66d484c59bb4bb2c1a779c1830e84a2b}{DescriptorPoolVulkan::GetPool}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00045}00045     \textcolor{keywordflow}{return} pool;}
\DoxyCodeLine{\Hypertarget{_descriptor_pool_vulkan_8cpp_source_l00046}00046 \}}

\end{DoxyCode}
