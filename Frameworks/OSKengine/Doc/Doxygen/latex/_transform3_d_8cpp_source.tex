\hypertarget{_transform3_d_8cpp_source}{}\doxysection{Transform3\+D.\+cpp}
\label{_transform3_d_8cpp_source}\index{OSKengine2/Transform3D.cpp@{OSKengine2/Transform3D.cpp}}
\mbox{\hyperlink{_transform3_d_8cpp}{Ir a la documentaci贸n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_transform3_d_8h}{Transform3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_entity_component_system_8h}{EntityComponentSystem.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_s_kengine_8h}{OSKengine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00006}\mbox{\hyperlink{_transform3_d_8cpp_abd75661fe7969e19439052a5f69ba5d1}{00006}} \textcolor{preprocessor}{\#define GLM\_ENABLE\_EXPERIMENTAL}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include <gtx/quaternion.hpp>}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00009}00009 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00010}00010 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s}{OSK::ECS}};}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00012}00012 \textcolor{keyword}{const} \textcolor{keyword}{static} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system}{ECS::EntityComponentSystem}}* GetEcs() \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00013}00013     \textcolor{keywordflow}{return} Engine::GetEntityComponentSystem();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00014}00014 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00016}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a10c838b2e1e87925aaca154cc34ca18a}{00016}} Transform3D::Transform3D(\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{ECS::GameObjectIndex}} owner) : owner(owner) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00017}00017     matrix = glm::mat4(1);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00019}00019     localPosition = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(0);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00020}00020     localScale = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(1);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00022}00022     globalPosition = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(0);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00023}00023     globalScale = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(1);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00025}00025     parent = 0;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00026}00026 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00028}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_abe67f13052baadaf4439950bc4b555db}{00028}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_abe67f13052baadaf4439950bc4b555db}{Transform3D::SetPosition}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& nPosition) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00029}00029     localPosition = nPosition;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00030}00030     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00031}00031 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00033}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a067dcb3c5276e24e0252ac78eeaa7259}{00033}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a067dcb3c5276e24e0252ac78eeaa7259}{Transform3D::SetScale}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& nScale) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00034}00034     localScale = nScale;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00036}00036     \textcolor{keywordflow}{if} (parent)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00037}00037         localScale += GetEcs()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(parent).\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a1d98e03821dbb441e045582fb65d55a4}{GetLocalScale}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00039}00039     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00040}00040 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00042}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a5e6b4d0eb8915eefd7bcd0aeaa424163}{00042}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a5e6b4d0eb8915eefd7bcd0aeaa424163}{Transform3D::SetRotation}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_quaternion}{Quaternion}}\& nRotation) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00043}00043     localRotation = nRotation;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00044}00044     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00045}00045 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00047}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a84e7319dbca0666f6194bd7da931644a}{00047}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a84e7319dbca0666f6194bd7da931644a}{Transform3D::AddPosition}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& positionDelta) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00048}00048     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_abe67f13052baadaf4439950bc4b555db}{SetPosition}}(localPosition + positionDelta);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00049}00049 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00051}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a519e0f71ada3555dd2af7f429e0e5d3f}{00051}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a519e0f71ada3555dd2af7f429e0e5d3f}{Transform3D::AddScale}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& scaleDelta) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00052}00052     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a067dcb3c5276e24e0252ac78eeaa7259}{SetScale}}(localScale + scaleDelta);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00053}00053 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00055}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a6c715494afef79663699e2d7db4db29a}{00055}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a6c715494afef79663699e2d7db4db29a}{Transform3D::ApplyRotation}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_quaternion}{Quaternion}}\& rotationDelta) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00056}00056     glm::quat q = localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_ac88cc76e26ff73c65e593e6273c8f4e9}{ToGlm}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00057}00057     q *= rotationDelta.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_ac88cc76e26ff73c65e593e6273c8f4e9}{ToGlm}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00059}00059     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a5e6b4d0eb8915eefd7bcd0aeaa424163}{SetRotation}}(\mbox{\hyperlink{class_o_s_k_1_1_quaternion_a0cbf0edcbfd33647de6fa20d641d2216}{Quaternion::FromGlm}}(q));}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00060}00060 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00062}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a305766732463c5ffb54588742006ff75}{00062}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a305766732463c5ffb54588742006ff75}{Transform3D::RotateLocalSpace}}(\textcolor{keywordtype}{float} angle, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& axis) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00063}00063     localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_a75e8c10361739559544d11313264bd0c}{Rotate\_LocalSpace}}(angle, axis);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00064}00064     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00065}00065 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00067}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_afc7da25075f1190d73579dd1b45fe33e}{00067}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_afc7da25075f1190d73579dd1b45fe33e}{Transform3D::RotateWorldSpace}}(\textcolor{keywordtype}{float} angle, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}}\& axis) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00068}00068     localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_adb48d1d2334b6a47fde67ab2313e6447}{Rotate\_WorldSpace}}(angle, axis);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00069}00069     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00070}00070 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00072}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_af20068240d93bd50dc884674ac34c2bd}{00072}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_af20068240d93bd50dc884674ac34c2bd}{Transform3D::AttachToObject}}(\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{ECS::GameObjectIndex}} obj) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00073}00073     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} c : childTransforms)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00074}00074         \textcolor{keywordflow}{if} (obj == c)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00075}00075             \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00077}00077     parent = obj;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00078}00078     GetEcs()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(obj).childTransforms.Insert(owner);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00079}00079 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00081}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aa2499c517f7531f84f1232987d148dc5}{00081}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aa2499c517f7531f84f1232987d148dc5}{Transform3D::UnAttach}}() \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00082}00082     \textcolor{keywordflow}{if} (owner \&\& parent)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00083}00083         GetEcs()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(parent).childTransforms.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a0a3bb760970ebe40178e9976c53d73ea}{Remove}}(owner);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00085}00085     owner = 0;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00086}00086 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00088}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{00088}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{Transform3D::UpdateModel}}() \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00089}00089     matrix = glm::mat4(1.0f);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00091}00091     \textcolor{keywordflow}{if} (parent) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00092}00092         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}\& parentTr = GetEcs()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(parent);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00094}00094         globalRotation = parentTr.globalRotation * localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_a5ab0ea79fd870ee2e32b836c2c4f5525}{ToMat4}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00096}00096         matrix = glm::translate(matrix, parentTr.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a385e7addbf6a4b3f00b54019e5335550}{GetPosition}}().\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_acb2737aa41e9e488c3e93a30fcedfb1c}{ToGLM}}());}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00097}00097         matrix *= parentTr.globalRotation;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00098}00098     \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00099}00099     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00100}00100         globalRotation = localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_a5ab0ea79fd870ee2e32b836c2c4f5525}{ToMat4}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00101}00101     \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00103}00103     \textcolor{comment}{//Posici贸n local.}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00104}00104     matrix = glm::translate(matrix, localPosition.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_acb2737aa41e9e488c3e93a30fcedfb1c}{ToGLM}}());}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00106}00106     \textcolor{comment}{//Escala local.}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00107}00107     matrix = glm::scale(matrix, localScale.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_acb2737aa41e9e488c3e93a30fcedfb1c}{ToGLM}}());}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00109}00109     \textcolor{comment}{//Rotaci贸n local.}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00110}00110     matrix = matrix * localRotation.\mbox{\hyperlink{class_o_s_k_1_1_quaternion_a5ab0ea79fd870ee2e32b836c2c4f5525}{ToMat4}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00112}00112     \textcolor{comment}{//Obtener posici贸n final.}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00113}00113     globalPosition = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(matrix * glm::vec4(0, 0, 0, 1));}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00115}00115     \mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{DynamicArray<GameObjectIndex>}} childrenToRemove;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00116}00116     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < childTransforms.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}(); i++) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00117}00117         \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}\& child = GetEcs()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(childTransforms[i]);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00118}00118         \textcolor{keywordflow}{if} (child.parent == owner)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00119}00119             child.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a64ea91f4fb800524683b5f0332e562cb}{UpdateModel}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00120}00120         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00121}00121             childrenToRemove.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a8b3caa95e30b8514bfca3d9078a70315}{Push}}(child.owner);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00122}00122     \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00124}00124     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& i : childrenToRemove)}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00125}00125         childTransforms.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a0a3bb760970ebe40178e9976c53d73ea}{Remove}}(i);}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00126}00126 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00128}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a385e7addbf6a4b3f00b54019e5335550}{00128}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a385e7addbf6a4b3f00b54019e5335550}{Transform3D::GetPosition}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00129}00129     \textcolor{keywordflow}{return} globalPosition;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00130}00130 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00132}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a71910548d1562847db1cd6c315b205d9}{00132}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a71910548d1562847db1cd6c315b205d9}{Transform3D::GetScale}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00133}00133     \textcolor{keywordflow}{return} globalScale;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00134}00134 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00136}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a16601a1c74629f0c493e00df8f3a8309}{00136}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a16601a1c74629f0c493e00df8f3a8309}{Transform3D::GetLocalPosition}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00137}00137     \textcolor{keywordflow}{return} localPosition;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00138}00138 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00140}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a1d98e03821dbb441e045582fb65d55a4}{00140}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a1d98e03821dbb441e045582fb65d55a4}{Transform3D::GetLocalScale}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00141}00141     \textcolor{keywordflow}{return} localScale;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00142}00142 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00143}00143 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00144}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a95b7e7b9dd90ea4c8f7bcf01d9e8e84f}{00144}} \mbox{\hyperlink{class_o_s_k_1_1_quaternion}{Quaternion}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a95b7e7b9dd90ea4c8f7bcf01d9e8e84f}{Transform3D::GetLocalRotation}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00145}00145     \textcolor{keywordflow}{return} localRotation;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00146}00146 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00148}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aaf12b490c6875c0308348d203a1656cb}{00148}} \mbox{\hyperlink{class_o_s_k_1_1_quaternion}{Quaternion}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aaf12b490c6875c0308348d203a1656cb}{Transform3D::GetRotation}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00149}00149     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_quaternion_a0cbf0edcbfd33647de6fa20d641d2216}{Quaternion::FromGlm}}(glm::toQuat(globalRotation));}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00150}00150 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00151}00151 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00152}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_ab31721ae72a69b2ec9fef61aaa7a91ed}{00152}} glm::mat4 \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_ab31721ae72a69b2ec9fef61aaa7a91ed}{Transform3D::GetAsMatrix}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00153}00153     \textcolor{keywordflow}{return} matrix;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00154}00154 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00155}00155 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00156}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a91ec96febabad2adffc147eb907f8d20}{00156}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a91ec96febabad2adffc147eb907f8d20}{Transform3D::OverrideMatrix}}(\textcolor{keyword}{const} glm::mat4\& matrix) \{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00157}00157     this-\/>matrix = matrix;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00158}00158 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00160}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_abc576eb6f4548e3631700c5fceff6bb6}{00160}} \mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{ECS::GameObjectIndex}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_abc576eb6f4548e3631700c5fceff6bb6}{Transform3D::GetParentObject}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00161}00161     \textcolor{keywordflow}{return} parent;}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00162}00162 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00163}00163 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00164}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a9b390c0ca43ed7f1ff6696b3a98e0e06}{00164}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_a9b390c0ca43ed7f1ff6696b3a98e0e06}{Transform3D::GetForwardVector}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00165}00165     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aaf12b490c6875c0308348d203a1656cb}{GetRotation}}().ToGlm() * \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{OSK::Vector3f}}(0, 0, 1).ToGLM()).\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_aef1702c4230df139c7f0e28cd27bc4a6}{GetNormalized}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00166}00166 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00167}00167 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00168}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_afa8ea01fe8104fcd34cc83e0157dea67}{00168}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_afa8ea01fe8104fcd34cc83e0157dea67}{Transform3D::GetRightVector}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00169}00169     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aaf12b490c6875c0308348d203a1656cb}{GetRotation}}().ToGlm() * \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{OSK::Vector3f}}(-\/1, 0, 0).ToGLM()).\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_aef1702c4230df139c7f0e28cd27bc4a6}{GetNormalized}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00170}00170 \}}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00172}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_ae1fdf26c51ef096c24769c479c976b45}{00172}} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_ae1fdf26c51ef096c24769c479c976b45}{Transform3D::GetTopVector}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00173}00173     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d_aaf12b490c6875c0308348d203a1656cb}{GetRotation}}().ToGlm() * \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{OSK::Vector3f}}(0, 1, 0).ToGLM()).\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_aef1702c4230df139c7f0e28cd27bc4a6}{GetNormalized}}();}
\DoxyCodeLine{\Hypertarget{_transform3_d_8cpp_source_l00174}00174 \}}

\end{DoxyCode}
