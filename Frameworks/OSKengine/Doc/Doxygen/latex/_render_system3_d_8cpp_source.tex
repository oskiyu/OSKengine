\hypertarget{_render_system3_d_8cpp_source}{}\doxysection{Render\+System3\+D.\+cpp}
\label{_render_system3_d_8cpp_source}\index{OSKengine2/RenderSystem3D.cpp@{OSKengine2/RenderSystem3D.cpp}}
\mbox{\hyperlink{_render_system3_d_8cpp}{Ir a la documentaciÃ³n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_render_system3_d_8h}{RenderSystem3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_transform3_d_8h}{Transform3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_model_component3_d_8h}{ModelComponent3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_s_kengine_8h}{OSKengine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_entity_component_system_8h}{EntityComponentSystem.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_command_list_8h}{ICommandList.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_instance_8h}{MaterialInstance.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_8h}{Material.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_layout_8h}{MaterialLayout.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00011}00011 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_model3_d_8h}{Model3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00012}00012 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_mesh3_d_8h}{Mesh3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00013}00013 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_viewport_8h}{Viewport.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00014}00014 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_layout_8h}{GpuImageLayout.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00015}00015 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_gpu_image_8h}{IGpuImage.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00016}00016 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_dimensions_8h}{GpuImageDimensions.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_types_8h}{GpuMemoryTypes.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00018}00018 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_sampler_desc_8h}{GpuImageSamplerDesc.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00019}00019 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_irradiance_map_8h}{IrradianceMap.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00020}00020 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_camera_component3_d_8h}{CameraComponent3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00021}00021 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_model3_d_8h}{Model3D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00022}00022 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_texture_8h}{Texture.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00024}00024 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00025}00025 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s}{OSK::ECS}};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00026}00026 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_a_s_s_e_t_s}{OSK::ASSETS}};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00027}00027 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s}{OSK::GRAPHICS}};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00029}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a1ee1a85dba0dab30f922b0f8a43b01a5}{00029}} RenderSystem3D::RenderSystem3D() \{\textcolor{comment}{// Signature del sistema}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00030}00030     \mbox{\hyperlink{class_o_s_k_1_1_constexpr_bit_set}{Signature}} signature\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00031}00031     signature.\mbox{\hyperlink{class_o_s_k_1_1_constexpr_bit_set_a2ed44d2a40faf6ff664947caf93846b4}{SetTrue}}(\mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>GetComponentType<Transform3D>());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00032}00032     signature.SetTrue(\mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>GetComponentType<ModelComponent3D>());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00033}00033     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_system_ac9336e70706ab6ea24d9f5fe95955efd}{SetSignature}}(signature);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00035}00035     \textcolor{comment}{// Mapa de sombras}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00036}00036     shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a0830a954dc3dfb5b404edc5e85ec6406}{Create}}(\{ 4096u \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00038}00038     \textcolor{comment}{// Directional light por defecto}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00039}00039     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3f}} direction = \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(1.0f, -\/3.f, 0.0f).\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_aef1702c4230df139c7f0e28cd27bc4a6}{GetNormalized}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00040}00040     dirLight.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_directional_light_afa382eaf7c25cc83c5ed5ded9c97ebcd}{directionAndIntensity}} = \mbox{\hyperlink{namespace_o_s_k_a98c42bf0a7665f299a3a66c8d4cdcdc2}{Vector4f}}(direction.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}}, direction.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}}, direction.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a50505b9a44529ae5aff66a956214549b}{Z}}, 1.2f);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00041}00041     dirLight.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_directional_light_a4c590d24d32a6ef8cffd96c9a6a35826}{color}} = \mbox{\hyperlink{class_o_s_k_1_1_color}{Color}}(253 / 255.f, 253 / 255.f, 225 / 255.f);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00043}00043     \textcolor{comment}{// Material del terreno}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00044}00044     terrainMaterial = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a15a2d271ad61c59ce4414dbdf016d277}{GetMaterialSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_system_ad39c519e3a5f58cc2a7622ba9b39687a}{LoadMaterial}}(\textcolor{stringliteral}{"{}Resources/PbrMaterials/terrain.json"{}});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00045}00045     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_acdee489fde34e4aa92c379db15e1c3e5}{SetMaterialInstance}}(terrainMaterial-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_acf1dacea3b45a53ca86d96e30af22af1}{CreateInstance}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00047}00047     \textcolor{comment}{// Material de la escena}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00048}00048     sceneMaterial = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a15a2d271ad61c59ce4414dbdf016d277}{GetMaterialSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_system_ad39c519e3a5f58cc2a7622ba9b39687a}{LoadMaterial}}(\textcolor{stringliteral}{"{}Resources/material\_pbr.json"{}});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00049}00049     sceneMaterialInstance = sceneMaterial-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_acf1dacea3b45a53ca86d96e30af22af1}{CreateInstance}}().GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00050}00050     animatedSceneMaterial = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a15a2d271ad61c59ce4414dbdf016d277}{GetMaterialSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_system_ad39c519e3a5f58cc2a7622ba9b39687a}{LoadMaterial}}(\textcolor{stringliteral}{"{}Resources/PbrMaterials/Animated/material\_pbr.json"{}});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00052}00052     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_uniform_buffer}{IGpuUniformBuffer}}* \_cameraUbos[3]\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00053}00053     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_uniform_buffer}{IGpuUniformBuffer}}* \_dirLightUbos[3]\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00054}00054     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_uniform_buffer}{IGpuUniformBuffer}}* \_shadowsMatricesUbos[3]\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00055}00055     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image}{GpuImage}}* \_shadowsMaps[3]\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00056}00056     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < 3; i++) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00057}00057         cameraUbos[i] = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_acf03703bbb6f031f905612d86f104b38}{GetMemoryAllocator}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_ac8beb74ff85ed07f8d96a60683ac0599}{CreateUniformBuffer}}(\textcolor{keyword}{sizeof}(glm::mat4) * 2 + \textcolor{keyword}{sizeof}(glm::vec4)).GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00058}00058         \_cameraUbos[i] = cameraUbos[i].GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00060}00060         dirLightUbos[i] = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_acf03703bbb6f031f905612d86f104b38}{GetMemoryAllocator}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_ac8beb74ff85ed07f8d96a60683ac0599}{CreateUniformBuffer}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_directional_light}{DirectionalLight}})).GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00061}00061         \_dirLightUbos[i] = dirLightUbos[i].GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00063}00063         \_shadowsMatricesUbos[i] = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3623673ebffd02cd44830d38b5e52b95}{GetDirLightMatrixUniformBuffers}}()[i];}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00064}00064         \_shadowsMaps[i] = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(i);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00065}00065     \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00067}00067     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>SetUniformBuffers(\textcolor{stringliteral}{"{}camera"{}}, \_cameraUbos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00068}00068     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>SetUniformBuffers(\textcolor{stringliteral}{"{}dirLight"{}}, \_dirLightUbos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00069}00069     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>SetUniformBuffers(\textcolor{stringliteral}{"{}dirLightShadowMat"{}}, \_shadowsMatricesUbos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00070}00070     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>SetGpuImages(\textcolor{stringliteral}{"{}dirLightShadowMap"{}}, \_shadowsMaps, SampledChannel::DEPTH, SampledArrayType::ARRAY);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00072}00072 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00074}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a007beacc80a26e67367e7deda812d65c}{00074}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a007beacc80a26e67367e7deda812d65c}{RenderSystem3D::Initialize}}(\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{GameObjectIndex}} camera, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_irradiance_map}{IrradianceMap}}\& irradianceMap) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00075}00075     cameraObject = camera;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00077}00077     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>SetGpuImage(\textcolor{stringliteral}{"{}irradianceMap"{}}, irradianceMap.\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_irradiance_map_a1ccaa4464e037058aeabc27de7854f7a}{GetGpuImage}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00078}00078     sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}})-\/>FlushUpdate();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00080}00080     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a5e2359e7cd0c026983bce50b75c96f8b}{SetGpuImage}}(\textcolor{stringliteral}{"{}irradianceMap"{}}, irradianceMap.\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_irradiance_map_a1ccaa4464e037058aeabc27de7854f7a}{GetGpuImage}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00081}00081     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a71d6977bf0f937b5086a32ca8af9d3b3}{FlushUpdate}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00083}00083     shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a2049f04835be03e41411a54457933d50}{SetSceneCamera}}(camera);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00084}00084 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00086}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a890108dd7d405eb602d0d80fefefdada}{00086}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a890108dd7d405eb602d0d80fefefdada}{RenderSystem3D::InitializeTerrain}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector2__t}{Vector2ui}}\& resolution, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_texture}{Texture}}\& heightMap, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_texture}{Texture}}\& texture) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00087}00087     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_a8d923c2329e5d00304d23043c6686132}{Generate}}(resolution);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00089}00089     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a5e2359e7cd0c026983bce50b75c96f8b}{SetGpuImage}}(\textcolor{stringliteral}{"{}heightmap"{}}, heightMap.\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_texture_ab04a5d675e7a3f71ceac7dd8d5234697}{GetGpuImage}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00091}00091     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_uniform_buffer}{IGpuUniformBuffer}}* ubos[3]\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00092}00092     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < 3; i++) ubos[i] = cameraUbos[i].GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00093}00093     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a02e51bf654ce78b7cce5e27a07fb4f1a}{SetUniformBuffers}}(\textcolor{stringliteral}{"{}camera"{}}, ubos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00095}00095     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < 3; i++) ubos[i] = dirLightUbos[i].GetPointer();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00096}00096     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a02e51bf654ce78b7cce5e27a07fb4f1a}{SetUniformBuffers}}(\textcolor{stringliteral}{"{}dirLight"{}}, ubos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00098}00098     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < 3; i++) ubos[i] = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3623673ebffd02cd44830d38b5e52b95}{GetDirLightMatrixUniformBuffers}}()[i];}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00099}00099     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a02e51bf654ce78b7cce5e27a07fb4f1a}{SetUniformBuffers}}(\textcolor{stringliteral}{"{}dirLightShadowMat"{}}, ubos);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00101}00101     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image}{GpuImage}}* shadowMaps[3]\{ shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(0), shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(1), shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(2) \};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00102}00102     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a697cdef3d31ed21fde3b92a3732fbd6c}{SetGpuImages}}(\textcolor{stringliteral}{"{}dirLightShadowMap"{}}, shadowMaps, SampledChannel::DEPTH, SampledArrayType::ARRAY);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00103}00103     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a71d6977bf0f937b5086a32ca8af9d3b3}{FlushUpdate}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00105}00105     \textcolor{comment}{// Albedo}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00106}00106     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}texture"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a5e2359e7cd0c026983bce50b75c96f8b}{SetGpuImage}}(\textcolor{stringliteral}{"{}albedoTexture"{}}, texture.\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_texture_ab04a5d675e7a3f71ceac7dd8d5234697}{GetGpuImage}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00107}00107     terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}texture"{}})-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_material_slot_a71d6977bf0f937b5086a32ca8af9d3b3}{FlushUpdate}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00108}00108 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00109}00109 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00110}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a5f61471f90f9586b0b24be7bd0226bf3}{00110}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a5f61471f90f9586b0b24be7bd0226bf3}{RenderSystem3D::CreateTargetImage}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector2__t}{Vector2ui}}\& size) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00111}00111     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_a8e9d568865c3d41fbec6afd49acb3cfa}{renderTarget}}.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_target_a2762dc66547722dc7742657d52f000bb}{Create}}(size, Format::RGBA32\_SFLOAT, Format::D32S8\_SFLOAT\_SUINT);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00113}00113     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_a8e9d568865c3d41fbec6afd49acb3cfa}{renderTarget}}.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_target_af79cef3ae998b47fd109d86c3c19ee35}{SetName}}(\textcolor{stringliteral}{"{}RenderSystem3D Target"{}});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00114}00114 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00116}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a69771f412015a908acba9b67a4dc99bd}{00116}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a69771f412015a908acba9b67a4dc99bd}{RenderSystem3D::Resize}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector2__t}{Vector2ui}}\& size) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00117}00117     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_aec037cb8c46f11305e3c68a615a8ab4c}{IRenderSystem::Resize}}(size);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00118}00118 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00119}00119 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00120}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a6b8811a0612a96336cca1402e1004d97}{00120}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map}{ShadowMap}}* \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a6b8811a0612a96336cca1402e1004d97}{RenderSystem3D::GetShadowMap}}() \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00121}00121     \textcolor{keywordflow}{return} \&shadowMap;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00122}00122 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00124}00124 \textcolor{keywordtype}{void} RenderSystem3D::GenerateShadows(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{ICommandList}}* commandList, \mbox{\hyperlink{namespace_o_s_k_1_1_a_s_s_e_t_s_a192866f841033401ce3c83efcaf81027}{ModelType}} modelType) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00125}00125     \textcolor{keyword}{const} \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} currentFrameIndex = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a4a779e3af14025ec16d8a0c0a6cf0fe5}{GetCurrentCommandListIndex}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00126}00126     \textcolor{keyword}{const} \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_viewport}{Viewport}} viewport \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00127}00127         .\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_viewport_a3a44365634cd80baebfa85c16d3339d9}{rectangle}} = \{ 0u, 0u, shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_aa9abc4993f6720c28ee54faa2df13cac}{GetColorImage}}(0)-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_a244ebc8ce3ae3095698ea0c3eaba58fc}{GetSize}}().\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}}, shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_aa9abc4993f6720c28ee54faa2df13cac}{GetColorImage}}(0)-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_a244ebc8ce3ae3095698ea0c3eaba58fc}{GetSize}}().\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}} \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00128}00128     \};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00129}00129 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00130}00130     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a4f744548e824c36b684f4d35bd1b90b2}{SetGpuImageBarrier}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(currentFrameIndex), GpuImageLayout::DEPTH\_STENCIL\_TARGET,}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00131}00131         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::FRAGMENT\_SHADER, GpuBarrierAccessStage::SHADER\_READ), \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::DEPTH\_STENCIL\_START, GpuBarrierAccessStage::DEPTH\_STENCIL\_READ | GpuBarrierAccessStage::DEPTH\_STENCIL\_WRITE),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00132}00132         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info}{GpuImageBarrierInfo}}\{ .\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info_a89f637c4de7944fc1228348171b23830}{baseLayer}} = 0, .numLayers = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a19ef749dc3d51d127b5191dfcbb09ca2}{GetNumCascades}}(), .baseMipLevel = 0, .numMipLevels = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_af4ec621c557d492c7de3493e2b2bd1a9}{ALL\_MIP\_LEVELS}}, .channel = SampledChannel::DEPTH | SampledChannel::STENCIL \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00134}00134     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_ad7cd8a020a86d10e75f1b0241e41cc37}{SetViewport}}(viewport);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00135}00135     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_ad7246c4be8141d70827ee91c1686144e}{SetScissor}}(viewport.rectangle);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00137}00137     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a19ef749dc3d51d127b5191dfcbb09ca2}{GetNumCascades}}(); i++) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00138}00138         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_pass_image_info}{RenderPassImageInfo}} colorInfo\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00139}00139         colorInfo.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_pass_image_info_a870b6478e66f3abf1aa43f0cf7771368}{arrayLevel}} = i;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00140}00140         colorInfo.targetImage = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_aa9abc4993f6720c28ee54faa2df13cac}{GetColorImage}}(currentFrameIndex);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00142}00142         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_pass_image_info}{RenderPassImageInfo}} depthInfo\{\};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00143}00143         depthInfo.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_pass_image_info_a870b6478e66f3abf1aa43f0cf7771368}{arrayLevel}} = i;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00144}00144         depthInfo.targetImage = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(currentFrameIndex);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00145}00145 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00146}00146         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_ae3d1fda12c227f4b1782a16c2dca7f5c}{BeginGraphicsRenderpass}}(\{ colorInfo \}, depthInfo, \{ 1.0f, 1.0f, 1.0f, 1.0f \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00148}00148         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aced1453da2f79b5e435df27c330ab8d1}{BindMaterial}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_ac65819749ffb51ef5ce805ac35b7910d}{GetShadowsMaterial}}(ModelType::STATIC\_MESH));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00149}00149         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_ad7263c5e330f9148ba87ebff3aae13b3}{GetShadowsMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00151}00151         ShadowsRenderLoop(ModelType::STATIC\_MESH, commandList, i);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00152}00152 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00153}00153         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aced1453da2f79b5e435df27c330ab8d1}{BindMaterial}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_ac65819749ffb51ef5ce805ac35b7910d}{GetShadowsMaterial}}(ModelType::ANIMATED\_MODEL));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00154}00154         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_ad7263c5e330f9148ba87ebff3aae13b3}{GetShadowsMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00155}00155         ShadowsRenderLoop(ModelType::ANIMATED\_MODEL, commandList, i);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00157}00157         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a27c970b0c75c78d08fa173eb3b875eb1}{EndGraphicsRenderpass}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00158}00158     \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00160}00160     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a4f744548e824c36b684f4d35bd1b90b2}{SetGpuImageBarrier}}(shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a3c867730c2810236e1983be4d0e2190c}{GetShadowImage}}(currentFrameIndex), GpuImageLayout::SHADER\_READ\_ONLY,}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00161}00161         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::DEPTH\_STENCIL\_END, GpuBarrierAccessStage::DEPTH\_STENCIL\_READ | GpuBarrierAccessStage::DEPTH\_STENCIL\_WRITE), \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::FRAGMENT\_SHADER, GpuBarrierAccessStage::SHADER\_READ),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00162}00162         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info}{GpuImageBarrierInfo}}\{ .\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info_a89f637c4de7944fc1228348171b23830}{baseLayer}} = 0, .numLayers = shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_a19ef749dc3d51d127b5191dfcbb09ca2}{GetNumCascades}}(), .baseMipLevel = 0, .numMipLevels = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_af4ec621c557d492c7de3493e2b2bd1a9}{ALL\_MIP\_LEVELS}}, .channel = SampledChannel::DEPTH |SampledChannel::STENCIL \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00163}00163 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00165}00165 \textcolor{keywordtype}{void} RenderSystem3D::RenderScene(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{ICommandList}}* commandList) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00166}00166     \textcolor{keyword}{const} \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} currentFrameIndex = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a4a779e3af14025ec16d8a0c0a6cf0fe5}{GetCurrentCommandListIndex}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00167}00167     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00168}00168     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a4f744548e824c36b684f4d35bd1b90b2}{SetGpuImageBarrier}}(\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_a8e9d568865c3d41fbec6afd49acb3cfa}{renderTarget}}.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_render_target_a8c608c1c1f6d5b15d6a69e0e5baee7de}{GetMainTargetImage}}(currentFrameIndex), GpuImageLayout::SHADER\_READ\_ONLY,}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00169}00169         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::FRAGMENT\_SHADER, GpuBarrierAccessStage::SHADER\_READ), \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_barrier_info}{GpuBarrierInfo}}(GpuBarrierStage::COLOR\_ATTACHMENT\_OUTPUT, GpuBarrierAccessStage::COLOR\_ATTACHMENT\_WRITE),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00170}00170         \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info}{GpuImageBarrierInfo}}\{ .\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_barrier_info_a89f637c4de7944fc1228348171b23830}{baseLayer}} = 0, .numLayers = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a180d96d3f745a60bce6b0ffd5209ce35}{ALL\_IMAGE\_LAYERS}}, .baseMipLevel = 0, .numMipLevels = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_af4ec621c557d492c7de3493e2b2bd1a9}{ALL\_MIP\_LEVELS}} \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00172}00172     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_ae3d1fda12c227f4b1782a16c2dca7f5c}{BeginGraphicsRenderpass}}(\&\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_a8e9d568865c3d41fbec6afd49acb3cfa}{renderTarget}}, \mbox{\hyperlink{class_o_s_k_1_1_color_a59c0bb4e7d3b7d396f97e1119f01f1ca}{Color::BLACK}}() * 0.0f);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00173}00173     \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_render_system_ae3c3f809429c0eb238b4b5a58e4a756a}{SetupViewport}}(commandList);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00175}00175     SceneRenderLoop(ModelType::STATIC\_MESH, commandList);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00176}00176     SceneRenderLoop(ModelType::ANIMATED\_MODEL, commandList);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00177}00177 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00178}00178     \textcolor{keywordflow}{if} (terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_a5d75b32a1f9e28c0de7bb6ce2406f845}{GetVertexBuffer}}() != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00179}00179         RenderTerrain(commandList);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00180}00180     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00181}00181     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a27c970b0c75c78d08fa173eb3b875eb1}{EndGraphicsRenderpass}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00182}00182 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00183}00183 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00184}00184 \textcolor{keywordtype}{void} RenderSystem3D::SceneRenderLoop(\mbox{\hyperlink{namespace_o_s_k_1_1_a_s_s_e_t_s_a192866f841033401ce3c83efcaf81027}{ModelType}} modelType, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{ICommandList}}* commandList) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00185}00185     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_vertex_buffer}{IGpuVertexBuffer}}* previousVertexBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00186}00186     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_index_buffer}{IGpuIndexBuffer}}* previousIndexBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00187}00187 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00188}00188     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aced1453da2f79b5e435df27c330ab8d1}{BindMaterial}}(modelType == ModelType::STATIC\_MESH ? sceneMaterial : animatedSceneMaterial);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00189}00189     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(sceneMaterialInstance-\/>GetSlot(\textcolor{stringliteral}{"{}global"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00190}00190     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00191}00191     \textcolor{keywordflow}{for} (\mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{GameObjectIndex}} obj : \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_system_ad3611590e6bde825b973c160d7a867d9}{GetObjects}}()) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00192}00192         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d}{ModelComponent3D}}\& model = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d}{ModelComponent3D}}>(obj);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00193}00193         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}\& transform = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(obj);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00194}00194 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00195}00195         \textcolor{keywordflow}{if} (model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a29273ffaa49b5726cf7b942268a93e84}{GetType}}() != modelType)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00196}00196             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00197}00197 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00198}00198         \textcolor{keywordflow}{if} (previousVertexBuffer != model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_ae71e7cb40f766ce9b5490b22971174ac}{GetVertexBuffer}}()) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00199}00199             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a5e41e7a449345ecc167ea9bc5a857211}{BindVertexBuffer}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_ae71e7cb40f766ce9b5490b22971174ac}{GetVertexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00200}00200             previousVertexBuffer = model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_ae71e7cb40f766ce9b5490b22971174ac}{GetVertexBuffer}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00201}00201         \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00202}00202         \textcolor{keywordflow}{if} (previousIndexBuffer != model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a7c1aaf201341a6e0666998cb7b13d98e}{GetIndexBuffer}}()) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00203}00203             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a12d4cae3d3f616dcc3a4b827a8abb5d5}{BindIndexBuffer}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a7c1aaf201341a6e0666998cb7b13d98e}{GetIndexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00204}00204             previousIndexBuffer = model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a7c1aaf201341a6e0666998cb7b13d98e}{GetIndexBuffer}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00205}00205         \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00206}00206 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00207}00207         \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00208}00208             glm::mat4 model;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00209}00209             glm::mat4 transposedInverseModel;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00210}00210             glm::vec4 materialInfos;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00211}00211         \} pushConsts\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00212}00212             .model = transform.GetAsMatrix(),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00213}00213             .transposedInverseModel = glm::transpose(glm::inverse(transform.GetAsMatrix()))}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00214}00214         \};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00215}00215 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00216}00216         \textcolor{keywordflow}{if} (modelType == ModelType::ANIMATED\_MODEL)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00217}00217             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a00630e4f7a8e059586932b395e8f1f2b}{GetAnimator}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_animator_a0e7388a40a856c0a9388c07d5b81900f}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}animation"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00219}00219         \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>GetMeshes().GetSize(); i++) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00220}00220             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_ad9162b7e1cb7978be75adda96e17ab79}{GetMeshMaterialInstance}}(i)-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}texture"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00221}00221 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00222}00222             pushConsts.materialInfos.x = model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_abde872df60b377efa267618057c5bfe4}{GetMetadata}}().\mbox{\hyperlink{struct_o_s_k_1_1_a_s_s_e_t_s_1_1_model_metadata_a990f8bc4bc4c8c91586a992b79b8f582}{meshesMetadata}}[i].metallicFactor;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00223}00223             pushConsts.materialInfos.y = model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_abde872df60b377efa267618057c5bfe4}{GetMetadata}}().\mbox{\hyperlink{struct_o_s_k_1_1_a_s_s_e_t_s_1_1_model_metadata_a990f8bc4bc4c8c91586a992b79b8f582}{meshesMetadata}}[i].roughnessFactor;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00224}00224 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00225}00225             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aa78c754b21eb1cf45f2c05e36bdb9276}{PushMaterialConstants}}(\textcolor{stringliteral}{"{}pushConstants"{}}, pushConsts);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00227}00227             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a359d8435654ddea9fdcc77d8cca9ff30}{DrawSingleMesh}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a480cf3e35730e8fb88c1e40cef76fdea}{GetMeshes}}()[i].GetFirstIndexId(), model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a480cf3e35730e8fb88c1e40cef76fdea}{GetMeshes}}()[i].GetNumberOfIndices());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00228}00228         \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00229}00229     \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00230}00230 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00231}00231 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00232}00232 \textcolor{keywordtype}{void} RenderSystem3D::ShadowsRenderLoop(\mbox{\hyperlink{namespace_o_s_k_1_1_a_s_s_e_t_s_a192866f841033401ce3c83efcaf81027}{ModelType}} modelType, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{ICommandList}}* commandList, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} cascadeIndex) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00233}00233     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{GameObjectIndex}} obj : \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_system_ad3611590e6bde825b973c160d7a867d9}{GetObjects}}()) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00234}00234         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d}{ModelComponent3D}}\& model = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d}{ModelComponent3D}}>(obj);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00235}00235         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}\& transform = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(obj);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00236}00236 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00237}00237         \textcolor{keywordflow}{if} (model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a29273ffaa49b5726cf7b942268a93e84}{GetType}}() != modelType)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00238}00238             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00239}00239 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00240}00240         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a5e41e7a449345ecc167ea9bc5a857211}{BindVertexBuffer}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_ae71e7cb40f766ce9b5490b22971174ac}{GetVertexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00241}00241         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a12d4cae3d3f616dcc3a4b827a8abb5d5}{BindIndexBuffer}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a7c1aaf201341a6e0666998cb7b13d98e}{GetIndexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00243}00243         \textcolor{keywordflow}{if} (modelType == ModelType::ANIMATED\_MODEL)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00244}00244             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a00630e4f7a8e059586932b395e8f1f2b}{GetAnimator}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_animator_a0e7388a40a856c0a9388c07d5b81900f}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}animation"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00245}00245 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00246}00246         \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00247}00247             glm::mat4 model;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00248}00248             \textcolor{keywordtype}{int} cascadeIndex;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00249}00249         \} \textcolor{keyword}{const} pushConstant\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00250}00250             .model = transform.GetAsMatrix(),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00251}00251             .cascadeIndex = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(cascadeIndex)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00252}00252         \};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00253}00253         commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aa78c754b21eb1cf45f2c05e36bdb9276}{PushMaterialConstants}}(\textcolor{stringliteral}{"{}model"{}}, pushConstant);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00255}00255         \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a480cf3e35730e8fb88c1e40cef76fdea}{GetMeshes}}().GetSize(); i++)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00256}00256             commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a359d8435654ddea9fdcc77d8cca9ff30}{DrawSingleMesh}}(model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a480cf3e35730e8fb88c1e40cef76fdea}{GetMeshes}}()[i].GetFirstIndexId(), model.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d_afba134f6e97739aaf47a74c3b4ba6690}{GetModel}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a480cf3e35730e8fb88c1e40cef76fdea}{GetMeshes}}()[i].GetNumberOfIndices());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00257}00257     \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00258}00258 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00259}00259 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00260}00260 \textcolor{keywordtype}{void} RenderSystem3D::RenderTerrain(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{ICommandList}}* commandList) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00261}00261     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aced1453da2f79b5e435df27c330ab8d1}{BindMaterial}}(terrainMaterial);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00262}00262     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}global"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00263}00263     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aebccacb95627e6c8c9da33367ca14368}{BindMaterialSlot}}(terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_adb670059a07068fcd5636acbd1c26c6c}{GetMaterialInstance}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a0cc12aae6dc313b4c4f24abe461b5f04}{GetSlot}}(\textcolor{stringliteral}{"{}texture"{}}));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00264}00264 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00265}00265     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a5e41e7a449345ecc167ea9bc5a857211}{BindVertexBuffer}}(terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_a5d75b32a1f9e28c0de7bb6ce2406f845}{GetVertexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00266}00266     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a12d4cae3d3f616dcc3a4b827a8abb5d5}{BindIndexBuffer}}(terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_af9ddf9b01543cad93d12b7cf2e933e1c}{GetIndexBuffer}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00267}00267     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00268}00268     glm::mat4 model = glm::scale(glm::mat4(1.0f), \{ 100.f, 5.f, 100.f \});}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00269}00269 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00270}00270     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00271}00271         glm::mat4 model;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00272}00272         glm::mat4 transposedInverseModel;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00273}00273         glm::vec4 materialInfos;}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00274}00274     \} pushConsts\{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00275}00275         .model = model,}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00276}00276         .transposedInverseModel = glm::transpose(glm::inverse(model)),}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00277}00277         .materialInfos = \{ 0.5f, 0.5f, 0.0f, 0.0f \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00278}00278     \};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00279}00279     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_aa78c754b21eb1cf45f2c05e36bdb9276}{PushMaterialConstants}}(\textcolor{stringliteral}{"{}pushConstants"{}}, pushConsts);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00280}00280     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00281}00281     commandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list_a359d8435654ddea9fdcc77d8cca9ff30}{DrawSingleMesh}}(0, terrain.\mbox{\hyperlink{struct_o_s_k_1_1_e_c_s_1_1_terrain_component_a752f821ce4fc666ec331a803b91493c4}{GetNumIndices}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00282}00282 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00283}00283 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00284}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a0f6ecaafe704974730190d0b7f274b1a}{00284}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a0f6ecaafe704974730190d0b7f274b1a}{RenderSystem3D::Render}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_command_list}{GRAPHICS::ICommandList}}* commandList) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00285}00285     \textcolor{keyword}{const} \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} currentIndex = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a4a779e3af14025ec16d8a0c0a6cf0fe5}{GetCurrentCommandListIndex}}();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00286}00286 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00287}00287     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_camera_component3_d}{CameraComponent3D}}\& camera = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_camera_component3_d}{CameraComponent3D}}>(cameraObject);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00288}00288     \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}\& cameraTransform = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_transform3_d}{Transform3D}}>(cameraObject);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00289}00289 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00290}00290     cameraUbos[currentIndex]-\/>MapMemory();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00291}00291     cameraUbos[currentIndex]-\/>Write(camera.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_camera_component3_d_a68079a946e3c8d14718ef8d0f560b9c0}{GetProjectionMatrix}}());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00292}00292     cameraUbos[currentIndex]-\/>Write(camera.\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_camera_component3_d_a5cc4bc7e2d2d8c23c93b13096970acdb}{GetViewMatrix}}(cameraTransform));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00293}00293     cameraUbos[currentIndex]-\/>Write(cameraTransform.GetPosition());}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00294}00294     cameraUbos[currentIndex]-\/>Unmap();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00296}00296     dirLightUbos[currentIndex]-\/>MapMemory();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00297}00297     dirLightUbos[currentIndex]-\/>Write(dirLight);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00298}00298     dirLightUbos[currentIndex]-\/>Unmap();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00299}00299 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00300}00300     shadowMap.\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_shadow_map_ab750efcb37e8e0e58084096c18d1d0d6}{SetDirectionalLight}}(dirLight);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00301}00301     }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00302}00302     GenerateShadows(commandList, ModelType::STATIC\_MESH);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00303}00303     RenderScene(commandList);}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00304}00304 \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00305}00305 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00306}\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a65a6b4272468a563ea381aaf9f5e480d}{00306}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_render_system3_d_a65a6b4272468a563ea381aaf9f5e480d}{RenderSystem3D::OnTick}}(\mbox{\hyperlink{_o_s_kmacros_8h_ad05d5eacc527d5b61240124daf13b33b}{TDeltaTime}} deltaTime) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00307}00307     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{namespace_o_s_k_1_1_e_c_s_a23d62d7bd6a58fd7f758079d87df6c71}{GameObjectIndex}} obj : \mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_i_system_ad3611590e6bde825b973c160d7a867d9}{GetObjects}}()) \{}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00308}00308         \mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d}{Model3D}}* model = \mbox{\hyperlink{class_o_s_k_1_1_engine_a17fd2842c078b7ddb4aaa70cd04549ab}{Engine::GetEntityComponentSystem}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_entity_component_system_ab543c5c91b9b319ed21a01da96ea06d9}{GetComponent}}<\mbox{\hyperlink{class_o_s_k_1_1_e_c_s_1_1_model_component3_d}{ModelComponent3D}}>(obj).GetModel();}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00310}00310         \textcolor{keywordflow}{if} (model-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a29273ffaa49b5726cf7b942268a93e84}{GetType}}() == ModelType::STATIC\_MESH)}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00311}00311             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00312}00312 }
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00313}00313         model-\/>\mbox{\hyperlink{class_o_s_k_1_1_a_s_s_e_t_s_1_1_model3_d_a00630e4f7a8e059586932b395e8f1f2b}{GetAnimator}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_animator_a86dd1eb6f3267c766efd02c617a7afcb}{Update}}(deltaTime, \mbox{\hyperlink{namespace_o_s_k_a5e479af2ede269150542d90384ce3ee2}{Vector3f}}(1.0f));}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00314}00314     \}}
\DoxyCodeLine{\Hypertarget{_render_system3_d_8cpp_source_l00315}00315 \}}

\end{DoxyCode}
