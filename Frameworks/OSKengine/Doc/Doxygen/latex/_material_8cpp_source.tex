\hypertarget{_material_8cpp_source}{}\doxysection{Material.\+cpp}
\label{_material_8cpp_source}\index{OSKengine2/Material.cpp@{OSKengine2/Material.cpp}}
\mbox{\hyperlink{_material_8cpp}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_8h}{Material.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_graphics_pipeline_8h}{IGraphicsPipeline.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_s_kengine_8h}{OSKengine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_renderer_8h}{IRenderer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_instance_8h}{MaterialInstance.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_material_layout_8h}{MaterialLayout.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00009}00009 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00010}00010 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s}{OSK::GRAPHICS}};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00012}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a7f0b1a176f88c0ae392aa158eca2c769}{00012}} Material::Material(\textcolor{keyword}{const} \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_pipeline_create_info}{PipelineCreateInfo}}\& pipelineInfo, \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<MaterialLayout>}} layout, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_vertex_info}{VertexInfo}}\& vertexInfo, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_aad769de4b6a68624571ab3ae7ec13f97}{MaterialType}} materialType)}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00013}00013     : pipelineInfo(pipelineInfo), vertexInfo(vertexInfo), materialType(materialType) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00015}00015     this-\/>layout = layout.\mbox{\hyperlink{class_o_s_k_1_1_owned_ptr_a81dfab2299056fc9858aace55fca0042}{GetPointer}}();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00017}00017     \textcolor{keywordflow}{switch} (materialType) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00019}00019     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_aad769de4b6a68624571ab3ae7ec13f97aaeeda410acf56610eb5dc54402a952d9}{MaterialType::RAYTRACING}}:}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00020}00020         \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>IsRtActive())}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00021}00021             rtPipeline = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a1dbf6c028bf507121eaaaeffbebb57e4}{\_CreateRaytracingPipeline}}(pipelineInfo, layout.\mbox{\hyperlink{class_o_s_k_1_1_owned_ptr_a81dfab2299056fc9858aace55fca0042}{GetPointer}}(), vertexInfo).GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00022}00022         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00024}00024     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_aad769de4b6a68624571ab3ae7ec13f97aac404d7ce6ca5862e9b8a2641fbafd90}{MaterialType::COMPUTE}}:}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00025}00025         computePipeline = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a3816b3a4de498a8d648572a849ebe97e}{\_CreateComputePipeline}}(pipelineInfo, layout.\mbox{\hyperlink{class_o_s_k_1_1_owned_ptr_a81dfab2299056fc9858aace55fca0042}{GetPointer}}()).GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00026}00026     }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00027}00027     \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00029}00029 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00031}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a81bad4c57e869998238a88af6cae6109}{00031}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a81bad4c57e869998238a88af6cae6109}{Material::SetName}}(\textcolor{keyword}{const} std::string\& name) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00032}00032     this-\/>name = name;}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00033}00033 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00035}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_acf1dacea3b45a53ca86d96e30af22af1}{00035}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<MaterialInstance>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_acf1dacea3b45a53ca86d96e30af22af1}{Material::CreateInstance}}() \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00036}00036     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance}{MaterialInstance}}* output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance}{MaterialInstance}}(\textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00038}00038     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& i : layout-\/>GetAllSlotNames())}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00039}00039         output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_instance_a2293d59b8bd0c6c02dfb5cafc41261c0}{RegisterSlot}}(i);}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00041}00041     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00042}00042 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00044}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_af145277bed3af0474a0e1abbd2a12fac}{00044}} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_aad769de4b6a68624571ab3ae7ec13f97}{MaterialType}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_af145277bed3af0474a0e1abbd2a12fac}{Material::GetMaterialType}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00045}00045     \textcolor{keywordflow}{return} materialType;}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00046}00046 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00048}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a29f2fe999bf8857dbbb65fb73df335ca}{00048}} \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_layout}{MaterialLayout}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a29f2fe999bf8857dbbb65fb73df335ca}{Material::GetLayout}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00049}00049     \textcolor{keywordflow}{return} layout.GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00050}00050 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00052}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a39d6bc2358c846834fe3750122f68c67}{00052}} \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_graphics_pipeline}{IGraphicsPipeline}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a39d6bc2358c846834fe3750122f68c67}{Material::GetGraphicsPipeline}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{PipelineKey}}\& key) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00053}00053     \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} i = 0; i < graphicsPipelines.GetSize(); i++) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00054}00054         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{PipelineKey}}\& iKey = graphicsPipelines[i].first;}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00056}00056         \textcolor{keywordflow}{if} (key.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}() != iKey.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}())}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00057}00057             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00059}00059         \textcolor{keywordtype}{bool} compatible = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00060}00060         \textcolor{keywordflow}{for} (\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} j = 0; j < key.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}(); j++)\{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00061}00061             \textcolor{keywordflow}{if} (key[j] != iKey[j]) \{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00062}00062                 compatible = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00063}00063                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00064}00064             \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00065}00065         \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00066}00066         }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00067}00067         \textcolor{keywordflow}{if} (!compatible)}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00068}00068             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00069}00069         }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00070}00070         \textcolor{comment}{// Compatible}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00071}00071         \textcolor{keywordflow}{return} graphicsPipelines[i].second.GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00072}00072     \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00074}00074     \textcolor{comment}{// Crear nuevo pipeline compatible.}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00075}00075     pipelineInfo.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_pipeline_create_info_a031c05fb2778c508449834a5281e84fd}{formats}} = key;}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00076}00076     \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGraphicsPipeline>}} output = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a96b60646b6f54af001815e3385f6fc30}{\_CreateGraphicsPipeline}}(pipelineInfo, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_a29f2fe999bf8857dbbb65fb73df335ca}{GetLayout}}(), vertexInfo);}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00077}00077     output-\/>SetDebugName(name);}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00078}00078 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00079}00079     graphicsPipelines.Insert(\{ key, output.\mbox{\hyperlink{class_o_s_k_1_1_owned_ptr_a81dfab2299056fc9858aace55fca0042}{GetPointer}}() \});}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00081}00081     \textcolor{keywordflow}{return} output.\mbox{\hyperlink{class_o_s_k_1_1_owned_ptr_a81dfab2299056fc9858aace55fca0042}{GetPointer}}();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00082}00082 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00084}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_ace3413ec1b0f594398434ce7013e1800}{00084}} \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_raytracing_pipeline}{IRaytracingPipeline}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_ace3413ec1b0f594398434ce7013e1800}{Material::GetRaytracingPipeline}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00085}00085     \textcolor{keywordflow}{return} rtPipeline.GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00086}00086 \}}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00088}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_af6fed9156170cd97b18cc42c7e60c952}{00088}} \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_compute_pipeline}{IComputePipeline}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_material_af6fed9156170cd97b18cc42c7e60c952}{Material::GetComputePipeline}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00089}00089     \textcolor{keywordflow}{return} computePipeline.GetPointer();}
\DoxyCodeLine{\Hypertarget{_material_8cpp_source_l00090}00090 \}}

\end{DoxyCode}
