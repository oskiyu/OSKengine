\hypertarget{_gpu_memory_allocator_vulkan_8cpp_source}{}\doxysection{Gpu\+Memory\+Allocator\+Vulkan.\+cpp}
\label{_gpu_memory_allocator_vulkan_8cpp_source}\index{OSKengine2/GpuMemoryAllocatorVulkan.cpp@{OSKengine2/GpuMemoryAllocatorVulkan.cpp}}
\mbox{\hyperlink{_gpu_memory_allocator_vulkan_8cpp}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_allocator_vulkan_8h}{GpuMemoryAllocatorVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_block_vulkan_8h}{GpuMemoryBlockVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_subblock_vulkan_8h}{GpuMemorySubblockVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_vulkan_8h}{GpuImageVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_format_8h}{Format.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include <vulkan/vulkan.h>}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_format_vulkan_8h}{FormatVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_vulkan_8h}{GpuVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_type_vulkan_8h}{GpuMemoryTypeVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00011}00011 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_types_8h}{GpuMemoryTypes.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00012}00012 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_vertex_8h}{Vertex.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00013}00013 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_gpu_data_buffer_8h}{IGpuDataBuffer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00014}00014 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_vertex_buffer_vulkan_8h}{GpuVertexBufferVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00015}00015 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_s_kengine_8h}{OSKengine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00016}00016 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_renderer_vulkan_8h}{RendererVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_command_list_vulkan_8h}{CommandListVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00018}00018 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_index_buffer_vulkan_8h}{GpuIndexBufferVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00019}00019 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_uniform_buffer_vulkan_8h}{GpuUniformBufferVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00020}00020 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_dimensions_8h}{GpuImageDimensions.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00021}00021 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_image_usage_8h}{GpuImageUsage.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00022}00022 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_bottom_level_acceleration_structure_vulkan_8h}{BottomLevelAccelerationStructureVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_top_level_acceleration_structure_vulkan_8h}{TopLevelAccelerationStructureVulkan.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00024}00024 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_memory_types_8h}{GpuMemoryTypes.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00025}00025 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_gpu_storage_buffer_vk_8h}{GpuStorageBufferVk.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00027}00027 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00028}00028 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s}{OSK::GRAPHICS}};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00030}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a4c909856bc75b15f38fa643a5c537bf9}{00030}} GpuMemoryAllocatorVulkan::GpuMemoryAllocatorVulkan(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu}{IGpu}}* device)}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00031}00031     : \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator}{IGpuMemoryAllocator}}(device) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00033}00033 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00035}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a318d45713432c98597384fd85492c559}{00035}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuMemoryBlock>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a318d45713432c98597384fd85492c559}{GpuMemoryAllocatorVulkan::CreateNewBufferBlock}}(\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} size, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7f}{GpuBufferUsage}} usage, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} sharedType) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00036}00036     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_block_vulkan_aa3daa10c1005c7fc650b36f38d449d18}{GpuMemoryBlockVulkan::CreateNewBufferBlock}}(size, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}, sharedType, usage).GetPointer();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00037}00037 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00039}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ab352c9922bba681dd4c29676ac08416d}{00039}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuMemoryBlock>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ab352c9922bba681dd4c29676ac08416d}{GpuMemoryAllocatorVulkan::CreateNewImageBlock}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image}{GpuImage}}* image, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a19a2f70fc994c00eb022e520608c5ffa}{GpuImageUsage}} usage, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} sharedType) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00040}00040     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_block_vulkan_a763f090b38274873b07b6d6f8da43e52}{GpuMemoryBlockVulkan::CreateNewImageBlock}}(image, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}, sharedType, usage).GetPointer();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00041}00041 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00043}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a89332520bdd825057e45a549e4283192}{00043}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuVertexBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a89332520bdd825057e45a549e4283192}{GpuMemoryAllocatorVulkan::CreateVertexBuffer}}(\textcolor{keyword}{const} \textcolor{keywordtype}{void}* data, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} vertexSize, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} numVertices, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_vertex_info}{VertexInfo}}\& vertexInfo) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00044}00044     \textcolor{keyword}{const} \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} bufferSize = numVertices * vertexSize;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00045}00045     \textcolor{keyword}{auto} block = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(bufferSize, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7faa77fcc0c8db7e3e4c3ca370997298c34}{GpuBufferUsage::VERTEX\_BUFFER}} | \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7fac61dfc60317a58b2843ec29f8e3c2359}{GpuBufferUsage::TRANSFER\_DESTINATION}}, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042cea95c8166e4f408834884bbe57fef928f6}{GpuSharedMemoryType::GPU\_ONLY}});}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00047}00047     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer}{GpuDataBuffer}}* stagingBuffer = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a3c918e33eec9f4230299a348c16d5fdf}{CreateStagingBuffer}}(bufferSize).GetPointer();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00048}00048     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_a794d4d1ba8f5f2e81288398e59894eb9}{MapMemory}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00049}00049     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_aadfb37dc25b557c76dc43a3de3667d18}{Write}}(data, bufferSize);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00050}00050     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_ae807883f0c19342039d54ba88d45e968}{Unmap}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00052}00052     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vertex_buffer_vulkan}{GpuVertexBufferVulkan}}* output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vertex_buffer_vulkan}{GpuVertexBufferVulkan}}(block-\/>GetNextMemorySubblock(bufferSize, 0), bufferSize, 0, numVertices, vertexInfo);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00054}00054     \textcolor{keyword}{auto} singleTimeCommandList = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a0fa1cd26067c520e90cfa647f66e8366}{CreateSingleUseCommandList}}()-\/>As<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_command_list_vulkan}{CommandListVulkan}}>();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00055}00055     singleTimeCommandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_command_list_vulkan_a439119fa0f25443732cdfb32aed59c8a}{Reset}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00056}00056     singleTimeCommandList-\/>Start();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00058}00058     singleTimeCommandList-\/>CopyBuffer(stagingBuffer, output, bufferSize, 0, 0);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00060}00060     singleTimeCommandList-\/>Close();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00062}00062     singleTimeCommandList-\/>RegisterStagingBuffer(stagingBuffer);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00064}00064     \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_af337a6b45b1e298a4edff91981586d14}{SubmitSingleUseCommandList}}(singleTimeCommandList);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00066}00066     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00067}00067 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00069}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aef89e9652f13e27fa5b5940052fce007}{00069}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuIndexBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aef89e9652f13e27fa5b5940052fce007}{GpuMemoryAllocatorVulkan::CreateIndexBuffer}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{DynamicArray<TIndexSize>}}\& indices) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00070}00070     \textcolor{keyword}{const} \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} bufferSize = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a05f5134cdcc67a7889c57e39aa2f25ae}{TIndexSize}}) * indices.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00071}00071     \textcolor{keyword}{auto} block = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(bufferSize, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7fa24ba47a6b7ca772e4185e7a7b54d4c90}{GpuBufferUsage::INDEX\_BUFFER}} | \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7fac61dfc60317a58b2843ec29f8e3c2359}{GpuBufferUsage::TRANSFER\_DESTINATION}}, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042cea95c8166e4f408834884bbe57fef928f6}{GpuSharedMemoryType::GPU\_ONLY}});}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00073}00073     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer}{GpuDataBuffer}}* stagingBuffer = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a3c918e33eec9f4230299a348c16d5fdf}{CreateStagingBuffer}}(bufferSize).GetPointer();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00074}00074     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_a794d4d1ba8f5f2e81288398e59894eb9}{MapMemory}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00075}00075     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_aadfb37dc25b557c76dc43a3de3667d18}{Write}}(indices.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_ac8a6d70f938c482e1f7aa68c7d186bb8}{GetData}}(), bufferSize);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00076}00076     stagingBuffer-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer_ae807883f0c19342039d54ba88d45e968}{Unmap}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00078}00078     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_index_buffer_vulkan}{GpuIndexBufferVulkan}}* output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_index_buffer_vulkan}{GpuIndexBufferVulkan}}(block-\/>GetNextMemorySubblock(bufferSize, 0), bufferSize, 0, indices.\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array_a94d0cbf0543d0c976de674d31b15df90}{GetSize}}());}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00080}00080     \textcolor{keyword}{auto} singleTimeCommandList = \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_a0fa1cd26067c520e90cfa647f66e8366}{CreateSingleUseCommandList}}()-\/>As<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_command_list_vulkan}{CommandListVulkan}}>();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00081}00081     singleTimeCommandList-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_command_list_vulkan_a439119fa0f25443732cdfb32aed59c8a}{Reset}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00082}00082     singleTimeCommandList-\/>Start();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00084}00084     singleTimeCommandList-\/>CopyBuffer(stagingBuffer, output, bufferSize, 0, 0);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00086}00086     singleTimeCommandList-\/>Close();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00088}00088     singleTimeCommandList-\/>RegisterStagingBuffer(stagingBuffer);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00090}00090     \mbox{\hyperlink{class_o_s_k_1_1_engine_a019c5397d042224c134b7fd22c739d00}{Engine::GetRenderer}}()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_renderer_af337a6b45b1e298a4edff91981586d14}{SubmitSingleUseCommandList}}(singleTimeCommandList);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00092}00092     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00093}00093 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00095}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a053695e4a5255c4e5a682ebf06963a48}{00095}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuUniformBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a053695e4a5255c4e5a682ebf06963a48}{GpuMemoryAllocatorVulkan::CreateUniformBuffer}}(\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} size) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00096}00096     \textcolor{keyword}{auto} block = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(size, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7fa8d0be820da8f4fe5aa49e0ef3065ca29}{GpuBufferUsage::UNIFORM\_BUFFER}}, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042cea096f8c31942629a91cc086cbda5f5465}{GpuSharedMemoryType::GPU\_AND\_CPU}});}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00098}00098     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_uniform_buffer_vulkan}{GpuUniformBufferVulkan}}(block-\/>GetNextMemorySubblock(size, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_a1b0e5d22fed49696034d38442892121c}{As}}<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan}{GpuVulkan}}>()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_aee5a2fabcfefd4fc26f06f30f2d83ed5}{GetInfo}}().\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_1_1_info_ae86a22042a0a794409c875c0e5ebe1d4}{properties}}.limits.minUniformBufferOffsetAlignment), size, 0);;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00099}00099 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00101}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ae88596f53526eebf6007f8c999a152cc}{00101}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IGpuStorageBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ae88596f53526eebf6007f8c999a152cc}{GpuMemoryAllocatorVulkan::CreateStorageBuffer}}(\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} size) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00102}00102     \textcolor{keyword}{auto} block = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(size, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7faa486db75420308f63af20d85e2b6489d}{GpuBufferUsage::STORAGE\_BUFFER}}, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042cea096f8c31942629a91cc086cbda5f5465}{GpuSharedMemoryType::GPU\_AND\_CPU}});}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00104}00104     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_storage_buffer_vk}{GpuStorageBufferVk}}(block-\/>GetNextMemorySubblock(size, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_a1b0e5d22fed49696034d38442892121c}{As}}<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan}{GpuVulkan}}>()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_aee5a2fabcfefd4fc26f06f30f2d83ed5}{GetInfo}}().\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_1_1_info_ae86a22042a0a794409c875c0e5ebe1d4}{properties}}.limits.minUniformBufferOffsetAlignment), size, 0);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00105}00105 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00106}00106 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00107}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a3c918e33eec9f4230299a348c16d5fdf}{00107}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<GpuDataBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a3c918e33eec9f4230299a348c16d5fdf}{GpuMemoryAllocatorVulkan::CreateStagingBuffer}}(\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} size) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00108}00108     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer}{GpuDataBuffer}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(size,}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00109}00109         \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7fafb3bb8503e5cd907a3a7b02a495c229e}{GpuBufferUsage::TRANSFER\_SOURCE}},}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00110}00110         \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042cea096f8c31942629a91cc086cbda5f5465}{GpuSharedMemoryType::GPU\_AND\_CPU}})-\/>GetNextMemorySubblock(size, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_a1b0e5d22fed49696034d38442892121c}{As}}<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan}{GpuVulkan}}>()-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_aee5a2fabcfefd4fc26f06f30f2d83ed5}{GetInfo}}().\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_vulkan_1_1_info_ae86a22042a0a794409c875c0e5ebe1d4}{properties}}.limits.minStorageBufferOffsetAlignment), size, 0);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00111}00111 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00113}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a39857f376887acede43b84a6273368d3}{00113}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<GpuDataBuffer>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_a39857f376887acede43b84a6273368d3}{GpuMemoryAllocatorVulkan::CreateBuffer}}(\mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} size, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} alignment, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ad8b871b506bab7c4021326a1a10bbc7f}{GpuBufferUsage}} usage, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} sharedType) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00114}00114     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_data_buffer}{GpuDataBuffer}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a688b3d07de2ec4181441bb0c220aaa49}{GetNextBufferMemoryBlock}}(size, usage, sharedType)-\/>GetNextMemorySubblock(size, alignment), size, 0);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00115}00115 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00117}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aad18acc2028b57d737421b15f95fb5af}{00117}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<GpuImage>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aad18acc2028b57d737421b15f95fb5af}{GpuMemoryAllocatorVulkan::CreateImage}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3ui}}\& imageSize, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59}{GpuImageDimension}} dimension, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} numLayers, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_aac59f9d056e083c0b49ea768f974e3e8}{Format}} format, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a19a2f70fc994c00eb022e520608c5ffa}{GpuImageUsage}} usage, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} sharedType, \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} msaaSamples, \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_sampler_desc}{GpuImageSamplerDesc}} samplerDesc) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00118}00118     \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} numBytes = \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_abd894ab72db6cb1f2762684830d7354c}{GetFormatNumberOfBytes}}(format);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00119}00119 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00120}00120     \textcolor{keywordflow}{switch} (dimension) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00121}00121         \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59a998ea20c9e08b9bebbb4557f046e73b0}{OSK::GRAPHICS::GpuImageDimension::d1D}}: numBytes *= imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00122}00122         \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59a096d0d67e4521bdc9ae95ad5ba97c596}{OSK::GRAPHICS::GpuImageDimension::d2D}}: numBytes *= imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} * imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00123}00123         \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59acd3c2cd4dacbc96d56861a2a8946e5ba}{OSK::GRAPHICS::GpuImageDimension::d3D}}: numBytes *= imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} * imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}} * imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a50505b9a44529ae5aff66a956214549b}{Z}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00124}00124     \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00126}00126     \mbox{\hyperlink{class_o_s_k_1_1_vector3__t}{Vector3ui}} finalImageSize = imageSize;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00128}00128     \textcolor{keywordflow}{switch} (dimension) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00129}00129         \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59a998ea20c9e08b9bebbb4557f046e73b0}{OSK::GRAPHICS::GpuImageDimension::d1D}}: finalImageSize = \{ imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} , 1, 1 \}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00130}00130         \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ab91ccc08d13454cfeb3c4f78deb72d59a096d0d67e4521bdc9ae95ad5ba97c596}{OSK::GRAPHICS::GpuImageDimension::d2D}}: finalImageSize = \{ imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} , imageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}}, 1 \}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00131}00131     \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00132}00132 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00133}00133     \textcolor{keywordflow}{if} (finalImageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} == 0)}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00134}00134         finalImageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_a9dd92e8b519b62ce53eb71f58eba6d50}{X}} = 1;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00135}00135     \textcolor{keywordflow}{if} (finalImageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}} == 0)}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00136}00136         finalImageSize.\mbox{\hyperlink{class_o_s_k_1_1_vector3__t_afb19e7227d4047f7a666c03cea2b1658}{Y}} = 1;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00138}00138     \mbox{\hyperlink{_gpu_memory_allocator_vulkan_8h_a600cc1aac896aa576ad1d794aea333b6}{VkSampler}} sampler = VK\_NULL\_HANDLE;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00140}00140     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_vulkan}{GpuImageVulkan}}* output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_vulkan}{GpuImageVulkan}}(imageSize, dimension, usage, numLayers, format, msaaSamples, samplerDesc);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00142}00142     \mbox{\hyperlink{_o_s_kmacros_8h_a1acaf9dff8b00604e55d38b35a744a9a}{TSize}} numMipLevels = 0;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00143}00143     \textcolor{keywordflow}{switch} (samplerDesc.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_sampler_desc_a741e70e94808535310cd680c4c4fcded}{mipMapMode}}) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00144}00144     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a7b3d3107477f334f9d9d85a64c930c8aae1f2d5134ed2543d38a0de9751cf75d9}{GpuImageMipmapMode::AUTO}}:}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00145}00145         numMipLevels = output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_aa0220799f28ec1c45c888926243867e9}{GetMipLevels}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00146}00146         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00147}00147     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a7b3d3107477f334f9d9d85a64c930c8aa72baef04098f035e8a320b03ad197818}{GpuImageMipmapMode::CUSTOM}}:}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00148}00148         numMipLevels = samplerDesc.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_sampler_desc_ad82e0ed1c6457566719cb4436df5d1da}{maxMipLevel}};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00149}00149         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00150}00150     \textcolor{keywordflow}{case} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a7b3d3107477f334f9d9d85a64c930c8aab50339a10e1de285ac99d4c3990b8693}{GpuImageMipmapMode::NONE}}:}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00151}00151         numMipLevels = 1;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00152}00152         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00153}00153     \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00154}00154 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00155}00155     output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_vulkan_a81e07178f8bf17b2d3bf297392f73ad5}{CreateVkImage}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00156}00156     \textcolor{keyword}{auto} block = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_block_vulkan_a763f090b38274873b07b6d6f8da43e52}{GpuMemoryBlockVulkan::CreateNewImageBlock}}(output, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a8f655b1e1884b8285b6d90b3d8f94e98}{device}}, sharedType, usage);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00157}00157     output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_a7fc227e3e5ff1a6c8c384e668ec7c281}{SetBlock}}(block.GetPointer());}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00159}00159     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_allocator_a942def028b7a723f67c4bca4ced25a30}{imageMemoryBlocks}}.Insert(block.GetPointer());}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00160}00160 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00161}00161     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/ IMAGE -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ //}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00162}00162     output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_image_vulkan_a5908ac6e3dd4eb0ed9f9a5aff91303c9}{CreateVkSampler}}(samplerDesc);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00163}00163 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00164}00164     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00165}00165 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00166}00166 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00167}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aae10c6dfbf119a91a802f4f501a1da3a}{00167}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<ITopLevelAccelerationStructure>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_aae10c6dfbf119a91a802f4f501a1da3a}{GpuMemoryAllocatorVulkan::CreateTopAccelerationStructure}}(\mbox{\hyperlink{class_o_s_k_1_1_dynamic_array}{DynamicArray<const IBottomLevelAccelerationStructure*>}} bottomStructures) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00168}00168     \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<ITopLevelAccelerationStructure>}} output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_top_level_acceleration_structure_vulkan}{TopLevelAccelerationStructureVulkan}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00170}00170     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} i : bottomStructures)}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00171}00171         output-\/>AddBottomLevelAccelerationStructure(i-\/>As<\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_bottom_level_acceleration_structure_vulkan}{BottomLevelAccelerationStructureVulkan}}>());}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00172}00172 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00173}00173     output-\/>Setup();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00175}00175     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00176}00176 \}}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00177}00177 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00178}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ad7d6914e923db763bf2c94dfff5dbd5f}{00178}} \mbox{\hyperlink{class_o_s_k_1_1_owned_ptr}{OwnedPtr<IBottomLevelAccelerationStructure>}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_gpu_memory_allocator_vulkan_ad7d6914e923db763bf2c94dfff5dbd5f}{GpuMemoryAllocatorVulkan::CreateBottomAccelerationStructure}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_vertex_buffer}{IGpuVertexBuffer}}\& vertexBuffer, \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_index_buffer}{IGpuIndexBuffer}}\& indexBuffer) \{}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00179}00179     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_bottom_level_acceleration_structure_vulkan}{BottomLevelAccelerationStructureVulkan}}* output = \textcolor{keyword}{new} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_bottom_level_acceleration_structure_vulkan}{BottomLevelAccelerationStructureVulkan}}();}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00180}00180     output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_bottom_level_acceleration_structure_vulkan_ac668dd6d47642db969a9b0fa917df778}{Setup}}(vertexBuffer, indexBuffer);}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00181}00181     output-\/>\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_bottom_level_acceleration_structure_aa9861db9eac37cc449c5bc3aad871a83}{SetMatrix}}(glm::mat4(1.0f));}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00182}00182 }
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00183}00183     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_gpu_memory_allocator_vulkan_8cpp_source_l00184}00184 \}}

\end{DoxyCode}
