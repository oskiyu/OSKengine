\hypertarget{_i_gpu_memory_block_8cpp_source}{}\doxysection{IGpu\+Memory\+Block.\+cpp}
\label{_i_gpu_memory_block_8cpp_source}\index{OSKengine2/IGpuMemoryBlock.cpp@{OSKengine2/IGpuMemoryBlock.cpp}}
\mbox{\hyperlink{_i_gpu_memory_block_8cpp}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_gpu_memory_block_8h}{IGpuMemoryBlock.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_gpu_memory_subblock_8h}{IGpuMemorySubblock.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00005}00005 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k}{OSK}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00006}00006 \textcolor{keyword}{using namespace }\mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s}{OSK::GRAPHICS}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00008}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_ab4f41f6ec47b71266572279f815908f7}{00008}} IGpuMemoryBlock::IGpuMemoryBlock(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} reservedSize, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu}{IGpu}}* device, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} type, \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ae5e58e16d9268fde60c3eae698b225ec}{GpuMemoryUsage}} usage)}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00009}00009     : totalSize(reservedSize), availableSpace(reservedSize), type(type), usage(usage), device(device) \{ \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00011}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_adfe42ab34135cb8dcf5adc7cffb44d96}{00011}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_adfe42ab34135cb8dcf5adc7cffb44d96}{IGpuMemoryBlock::RemoveSubblock}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_subblock}{IGpuMemorySubblock}}* subblock) \{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00012}00012     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a993a008834e190bd4d4af0f0d4ee7f90}{subblocks}}.Remove(subblock);}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00013}00013 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00015}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_ac6b75bf30f8b512bbc0b60c41fdaedb6}{00015}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{IGpuMemoryBlock::TSize}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_ac6b75bf30f8b512bbc0b60c41fdaedb6}{IGpuMemoryBlock::GetAllocatedSize}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00016}00016     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6c30b84de9fc00a4eb001e9aa074f924}{totalSize}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00017}00017 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00019}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a5470b45782d39a27ed93ed2b52737727}{00019}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{IGpuMemoryBlock::TSize}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a5470b45782d39a27ed93ed2b52737727}{IGpuMemoryBlock::GetAvailableSpace}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00020}00020     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a71872852ab858a95c9af96ab49e1ec2a}{availableSpace}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00021}00021 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00023}\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_1_1_reusable_memory_subblock_ae6a7977ce4f1be96f397fd86e82257d2}{00023}} \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_1_1_reusable_memory_subblock_ae6a7977ce4f1be96f397fd86e82257d2}{IGpuMemoryBlock::ReusableMemorySubblock::operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_1_1_reusable_memory_subblock}{ReusableMemorySubblock}}\& other)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00024}00024     \textcolor{keywordflow}{return} \mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_1_1_reusable_memory_subblock_a13683da7b1bd258e1af3240d4365331d}{offset}} == other.\mbox{\hyperlink{struct_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_1_1_reusable_memory_subblock_a13683da7b1bd258e1af3240d4365331d}{offset}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00025}00025 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00027}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a0bbdd382268b0bb587b03c1180cecde8}{00027}} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_a85a830e82585f3a565d1f097491042ce}{GpuSharedMemoryType}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a0bbdd382268b0bb587b03c1180cecde8}{IGpuMemoryBlock::GetShareType}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00028}00028     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a49883b25223e08eefef3da606eacf367}{type}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00029}00029 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00031}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a80aec8670a12157bc819ed904d71e60e}{00031}} \mbox{\hyperlink{namespace_o_s_k_1_1_g_r_a_p_h_i_c_s_ae5e58e16d9268fde60c3eae698b225ec}{GpuMemoryUsage}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a80aec8670a12157bc819ed904d71e60e}{IGpuMemoryBlock::GetUsageType}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00032}00032     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a2e98cccefbc350a426c8d10d66f58769}{usage}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00033}00033 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00035}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a8be42e86b3c636e81a8c47a56fd29b09}{00035}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_subblock}{IGpuMemorySubblock}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a8be42e86b3c636e81a8c47a56fd29b09}{IGpuMemoryBlock::GetNextMemorySubblock}}(\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} size, \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} alignment) \{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00036}00036     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_subblock}{IGpuMemorySubblock}}* output = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00038}00038     \textcolor{keywordtype}{bool} isReused = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00040}00040     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& reuse : \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a152182de55cd4f7b16f86505db4276cf}{reusableSubblocks}}) \{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00041}00041         \textcolor{keywordflow}{if} (size < reuse.size) \{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00042}00042             output = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a4c08a6d5973d3854c6b90ccbcf03628f}{CreateNewMemorySubblock}}(size, reuse.offset).GetPointer();}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00044}00044             \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a152182de55cd4f7b16f86505db4276cf}{reusableSubblocks}}.Remove(reuse);}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00046}00046             isReused = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00048}00048             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00049}00049         \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00050}00050     \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00052}00052     \mbox{\hyperlink{_assert_8h_adfbccaec84df99b8277f9d877554170c}{OSK\_ASSERT}}(size <= \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a5470b45782d39a27ed93ed2b52737727}{GetAvailableSpace}}(), \textcolor{stringliteral}{"{}No se ha escogido un bloque de memoria con suficiente espacio libre."{}});}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00053}00053     }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00054}00054     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} finalOffset = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_acabc1fbe85c9cda983e9d7306e3f03da}{currentOffset}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00055}00055     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} extraOffset = 0;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00056}00056     \textcolor{keywordflow}{if} (alignment != 0 \&\& \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_acabc1fbe85c9cda983e9d7306e3f03da}{currentOffset}} != 0) \{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00057}00057         \textcolor{keyword}{const} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a6a0d2f6c5928204bd7707bf8d4324e9b}{TSize}} base = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_acabc1fbe85c9cda983e9d7306e3f03da}{currentOffset}} / alignment;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00058}00058         finalOffset = (base + 1) * alignment;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00059}00059         extraOffset = finalOffset -\/ \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_acabc1fbe85c9cda983e9d7306e3f03da}{currentOffset}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00060}00060     \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00062}00062     output = \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a4c08a6d5973d3854c6b90ccbcf03628f}{CreateNewMemorySubblock}}(size, finalOffset).GetPointer();}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00063}00063     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a993a008834e190bd4d4af0f0d4ee7f90}{subblocks}}.Insert(output);}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00064}00064     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a71872852ab858a95c9af96ab49e1ec2a}{availableSpace}} -\/= size + extraOffset;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00065}00065     \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_acabc1fbe85c9cda983e9d7306e3f03da}{currentOffset}} += size + extraOffset;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00067}00067     \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00068}00068 \}}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00070}\mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a580935b95ec1677cff56582f347e8900}{00070}} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu}{IGpu}}* \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_a580935b95ec1677cff56582f347e8900}{IGpuMemoryBlock::GetDevice}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00071}00071     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_o_s_k_1_1_g_r_a_p_h_i_c_s_1_1_i_gpu_memory_block_ac75aa44cce34a964dfe1d6026d4d3c5f}{device}};}
\DoxyCodeLine{\Hypertarget{_i_gpu_memory_block_8cpp_source_l00072}00072 \}}

\end{DoxyCode}
